<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Lohnblatt {{ p.user.displayName }} – {{ p.month }}</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; }
    .wrap { max-width: 760px; margin: 24px auto; border: 1px solid #ddd; padding: 24px; }
    h2 { margin: 0 0 8px; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    .right { text-align: right; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Lohnblatt</h2>
    <div>Monat: <strong>{{ p.month }}</strong></div>
    <div>Mitarbeiter: <strong>{{ p.user.displayName }}</strong></div>

    <table>
      <tr><th>Stunden</th><td class="right">{{ p.totalHours }}</td></tr>
      <tr><th>Stundenlohn</th><td class="right">{{ p.hourlyRate }} CHF</td></tr>
      <tr><th>Bruttolohn</th><td class="right">{{ p.grossSalary }} CHF</td></tr>
      <tr><th>Abzüge</th><td>
        <ul style="margin:0;padding-left:16px;">
          {% for d in p.deductions %}
          <li>{{ d.code }} ({{ d.rate }}%) – {{ d.amount }} CHF</li>
          {% endfor %}
        </ul>
      </td></tr>
      <tr><th><strong>Netto</strong></th><td class="right"><strong>{{ p.netSalary }} CHF</strong></td></tr>
    </table>

    <p style="margin-top:16px;font-size:12px;color:#666;">Hinweis: Vorschau als HTML. Für PDF später dompdf/knp_snappy einbinden.</p>
  </div>
</body>
</html>
